<!DOCTYPE html>
<html lang="en" class="astro-37FXCHFA">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <meta name="generator" content="Astro v2.0.2">
    <title>Cut the Bug Chase with Git Bisect</title>
    <script src="../../node_modules/feather-icons/dist/feather.js"></script>
    
  <link rel="stylesheet" href="/_astro/about.c88f82ea.css" /><script type="module">const t=(()=>typeof localStorage<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")();t==="light"?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark");window.localStorage.setItem("theme",t);const a=()=>{const e=document.documentElement;e.classList.toggle("dark");const o=e.classList.contains("dark");localStorage.setItem("theme",o?"dark":"light")};document.getElementById("dark-mode-toggle")?.addEventListener("click",a);
</script></head>
  <body class="flex flex-col min-h-screen min-w-screen bg-slate-200 dark:bg-brand-primary dark:text-slate-50 px-5 astro-37FXCHFA">
    <nav class="max-w-7xl mx-auto grid grid-cols-3 justify-between w-full pt-4 sm:pt-12 pb-24 px-0 xs:px-12">
  <div class="justify-self-start text-xl font-extrabold dark:text-white text-slate-800">
    <p class="border-b-2 border-emerald-800 dark:border-amber-500">Aloys</p>
    <p class="uppercase tracking-wider text-sm font-medium opacity-70">
      A bit better than yesterday
    </p>
  </div>

  <div class="flex items-center justify-center gap-x-3 px-2 py-2 relative overflow-hidden sm:flex-row flex-col">
    <a href="/" class="grow-1 shrink-1 text-slate-800/60 uppercase dark:text-slate-50/60 tracking-wider border-transparent dark:hover:border-amber-500/20 hover:border-emerald-800/20 border-b-4 hover:text-slate-800 dark:hover:text-slate-50 px-2 py-px transition">
          Home
        </a><a href="/about" class="grow-1 shrink-1 text-slate-800/60 uppercase dark:text-slate-50/60 tracking-wider border-transparent dark:hover:border-amber-500/20 hover:border-emerald-800/20 border-b-4 hover:text-slate-800 dark:hover:text-slate-50 px-2 py-px transition">
          About
        </a><a href="/blog" class="grow-1 shrink-1 text-slate-800/60 uppercase dark:text-slate-50/60 tracking-wider border-transparent dark:hover:border-amber-500/20 hover:border-emerald-800/20 border-b-4 hover:text-slate-800 dark:hover:text-slate-50 px-2 py-px transition">
          Blog
        </a>
  </div>

  <div class="flex justify-end">
    <button id="dark-mode-toggle" class="border-2 border-transparent rounded-lg p-2 cursor-pointer transition hover:scale-105">
      <span class="text-slate-800 dark:hidden block hover:text-emerald-800"><i data-feather="moon"></i>
      </span>
      <span class="dark:block hidden hover:text-amber-500"><i data-feather="sun"></i>
      </span>
    </button>
  </div>

  
</nav>
    <header class="prose mx-auto w-full py-12 dark:prose-invert lg:prose-lg">
    <a href="/blog" class="my-12 cursor-pointer rounded-xl bg-brand-secondary py-2 px-4 text-lg font-light uppercase tracking-wide text-brand-secondary-light no-underline transition hover:bg-brand-secondary-light hover:text-brand-secondary-dark">Go back</a>
    <h1 class="prose-h1:mt-2">
      Cut the Bug Chase with Git Bisect
    </h1>
    <div class="flex">
      <div class="bg-emerald-600 text-emerald-50 dark:text-slate-50 dark:bg-brand-primary-light rounded-xl px-3 py-1 uppercase font-light tracking-widest shadow-sm shadow-emerald-700/5 cursor-pointer  text-xs">
  Development
</div><div class="bg-emerald-600 text-emerald-50 dark:text-slate-50 dark:bg-brand-primary-light rounded-xl px-3 py-1 uppercase font-light tracking-widest shadow-sm shadow-emerald-700/5 cursor-pointer  text-xs">
  Git
</div>
    </div>
  </header><article class="prose mx-auto bg-slate-900 bg-opacity-5 dark:prose-invert lg:prose-lg">
    <p>Manager: <em>“Hey, we have noticed that X doesn’t compile, can you look at it?”</em>
Me: <em>“Sure, when did it stop compiling?”</em>
Manager: <em>“Sometimes in the last … 2 months.”</em></p>
<p>!Drawing 2022-12-23 08.52.10.excalidraw</p>
<p>In an ideal world, you have test suites running often and covering your code base thoroughly.</p>
<p>This allows you to be notified of issues quickly and act upon them.
Often, you can catch them even before it gets merged your main branch.
At the very least, you know roughly when and why the issue has appeared.</p>
<p>However, often we do not work in the perfect code base and it’s okay.
Business constraints gets in the way, and we have to skip tests, forego the refactoring phase or work with legacy code wrote by a dev who left 17 years ago.</p>
<p>This is real life, and we have to compose with it.
I would argue that  being able to operate with less-than-perfect code base is a very valuable skill.</p>
<p>!Cut the Bug Chase with Git Bisect 2022-12-23 10.38.38.excalidraw</p>
<p>So, when my manager came and say:
<em>“Eh, we have noticed that there is an issue with X, we are not sure when it got introduced, sometimes in the last 2 months. It needs to be fixed before release in two days”</em></p>
<p>I’m like: <em>“Yep, let me grab my <strong>Git Bisect</strong>“.</em>_</p>
<h1 id="binary-search-algorithm">Binary search algorithm</h1>
<p>Before we mention how git bisect works, we need to define what is the binary search algorithm.</p>
<p>In french, we talk about the “dichotomy method”.
Sounds fancy, but it’s pretty simply.</p>
<p>Binary search is the same idea of playing the game “Guess what number I’m thinking of, between 0 and 100” and using the ‘in the middle’ strategy.</p>
<p>You cut the sample in half, and check in which half the target is.
Then you halve that half again (bit of a tongue-twister that one).
You repeat until you find the number.</p>
<h2 id="visual-example">Visual example</h2>
<p>If you are more of a visual learner, you can watch binary search on this <a href="https://codepen.io/rpora/pen/GWqrVO">code pen made by Raphael Pora</a> (thank you).
Otherwise, you can continue reading.</p>
<h2 id="in-words-example">‘In words’ example</h2>
<p>Coming back to the ‘guess my number from 0  to 100’, let’s say our number is 11.
Using the binary search algorithm, we will do the following steps:</p>
<ol>
<li>
<p>Is it 50 ? No, lower.</p>
</li>
<li>
<p>Is it 25 ? (middle between 0-50) No, lower.</p>
</li>
<li>
<p>Is it 12 ? (middle between 0-25) No, lower.</p>
</li>
<li>
<p>Is it 6 ? (middle between 0-12) No, higher.</p>
</li>
<li>
<p>Is it 9 ? (middle between 6-12) No. higher.</p>
</li>
<li>
<p>Is it 11 ? (middle between 9-12)? Yes.</p>
</li>
</ol>
<p>That’s binary search. Easier than it sounds.</p>
<h1 id="git-bisect">Git Bisect</h1>
<h2 id="the-concept">The concept</h2>
<p>Git Bisect uses the binary search algorithm to find out the commit that introduced the issue.</p>
<p>All you have to tell Git Bisect: “Hey, I know that commit A is good, and the current commit is bad”.
That’s the equivalent of our range. We know that the issue has been introduced between A and HEAD.</p>
<p>Git Bisect will find the ‘middle’ commit between A and HEAD and ask you: “Does this commit contains the issue?”
Let’s call that ‘middle’ commit M.</p>
<p>You reply “Yes, all good” or “Nah, the issue is still here”.
If yes, the issue has been introduced between A and M.
If no, the issue has been introduced between M and HEAD.</p>
<p>And we repeat the process until we find the faulty commit.</p>
<h2 id="how-to">How to</h2>
<p>The process is very simple, all you need to do to get started is to tell git bisect a good commit, and a bad commit.
This will provide the range to search.</p>
<p>Git will then take you step by step through the process.</p>
<pre is:raw="" class="astro-code" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">git bisect start // Start the bisect method</span></span>
<span class="line"><span style="color: #abb2bf">git bisect bad // HEAD (current) is bad</span></span>
<span class="line"><span style="color: #abb2bf">git bisect good 123asd // commit 123asd was good</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">// Bisecting: 675 revisions left to test after this (roughly 10 steps)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre>
<p>Now Git will take you to the ‘middle’ commit. You can check whether the issue is present or not, and let git know about it.</p>
<pre is:raw="" class="astro-code" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">git bisect good // or `git bisect bad` if the issue is still present</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre>
<p>Repeat until you find the culprit.</p>
<pre is:raw="" class="astro-code" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #abb2bf">git bisect good </span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">// Git has found the culprit!</span></span>
<span class="line"><span style="color: #abb2bf">8e63eb34f6686b61bf4d37b37a7e06cffb220d66 is the first bad commit</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">commit 8e63eb34f6686b61bf4d37b37a7e06cffb220d66</span></span>
<span class="line"><span style="color: #abb2bf">Author: Guilty Bob</span></span>
<span class="line"><span style="color: #abb2bf">Date: ages ago</span></span>
<span class="line"><span style="color: #abb2bf">(commit message)</span></span>
<span class="line"><span style="color: #abb2bf">(commit summary)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre>
<p>If you want to find out more, I encourage you to <a href="https://git-scm.com/docs/git-bisect">read the documentation</a></p>
<h1 id="bonus-automate-the-process">Bonus: automate the process</h1>
<p>Here’s a cool trick for the <del>lazy</del> smart developer.</p>
<p>You can automate the whole task and let the computer do the work for you.</p>
<p>Now, it won’t work with every bug but if your issue is easily to ‘verifiable’ with a script, you can provide that script to Git using <code>git bisect run my-script.sh</code>.</p>
<p>It will run your script at each step on the ‘middle’ commit,. Depending on the outcome of your script, Git will label the commit as bad or good accordingly.</p>
<p>In my case, the issue we had was a package of our monorepo was not compiling.</p>
<p>We use <code>webpack</code> to compile our package, so it is easily testable with a script.</p>
<pre is:raw="" class="astro-code" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #abb2bf">// build.sh</span></span></code></pre>
  </article>
    <footer class="flex justify-center items-center p-8 gap-8 py-16">
  <div class="justify-self-start text-xl font-extrabold dark:text-white text-slate-800">
    <p class="border-b-2 border-emerald-800 dark:border-amber-500">Aloys</p>
    <p class="uppercase tracking-wider text-sm font-medium opacity-70">
      A bit better than yesterday
    </p>
  </div>
  <div class="flex gap-4">
    <div class="group relative flex flex-cols items-center justify-center">
  <div class="p-2 bg-emerald-900 text-emerald-50 dark:text-slate-50 dark:bg-brand-primary-light rounded-full shadow-sm cursor-pointer group-hover:scale-105 border-transparent border-2 group-hover:border-green-500 dark:group-hover:border-amber-500 transition-all relative group">
    <i data-feather="mail"></i>
  </div>
  <div class="absolute top-full h-0 group-hover:h-8 transition-all flex justify-center items-center overflow-hidden">
    <p class="uppercase text-xs tracking-widest center text-emerald-900 dark:text-slate-50/50">
      email
    </p>
  </div>
</div>
    <div class="group relative flex flex-cols items-center justify-center">
  <div class="p-2 bg-emerald-900 text-emerald-50 dark:text-slate-50 dark:bg-brand-primary-light rounded-full shadow-sm cursor-pointer group-hover:scale-105 border-transparent border-2 group-hover:border-green-500 dark:group-hover:border-amber-500 transition-all relative group">
    <i data-feather="github"></i>
  </div>
  <div class="absolute top-full h-0 group-hover:h-8 transition-all flex justify-center items-center overflow-hidden">
    <p class="uppercase text-xs tracking-widest center text-emerald-900 dark:text-slate-50/50">
      Github
    </p>
  </div>
</div>
    <div class="group relative flex flex-cols items-center justify-center">
  <div class="p-2 bg-emerald-900 text-emerald-50 dark:text-slate-50 dark:bg-brand-primary-light rounded-full shadow-sm cursor-pointer group-hover:scale-105 border-transparent border-2 group-hover:border-green-500 dark:group-hover:border-amber-500 transition-all relative group">
    <i data-feather="twitter"></i>
  </div>
  <div class="absolute top-full h-0 group-hover:h-8 transition-all flex justify-center items-center overflow-hidden">
    <p class="uppercase text-xs tracking-widest center text-emerald-900 dark:text-slate-50/50">
      Twitter
    </p>
  </div>
</div>
  </div>
</footer>
  <script>
    // @ts-ignore
    feather.replace();
  </script>
</body></html>